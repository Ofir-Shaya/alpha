// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

generator client {
  provider = "prisma-client-js"
  previewFeatures = ["extendedWhereUnique"]
}
model User {
  id                Int       @id @default(autoincrement())
  email             String    @unique
  password          String
  profile           Profile?
}
model Profile {
  id                Int       @id @default(autoincrement())
  username          String    @unique
  puuid             String    @unique
  summonerLevel     Int
  profileIconId     Int?
  user              User?     @relation(fields: [userId], references: [id])
  userId            Int?      @unique
  rankedInformation RankedInformation?

}

model RankedInformation {
  summonerId        String     @id  
  queueType         String
  tier              String
  rank              String
  leaguePoints      Int
  wins              Int
  losses            Int
  veteran           Boolean
  inactive          Boolean
  freshBlood        Boolean
  hotStreak         Boolean
  profile           Profile     @relation(fields: [profileId], references: [puuid])
  playerMatchStats  PlayerMatchStats[]
  profileId         String      @unique
}
model PlayerMatchStats {
  matchId                          String
  playerId                         String
  championName                     String
  teamId                           Int
  win                              Boolean?
  spell1Id                         Int?
  spell2Id                         Int?
  item0                            Int?
  item1                            Int?
  item2                            Int?
  item3                            Int?
  item4                            Int?
  item5                            Int?
  item6                            Int?
  kills                            Int?
  deaths                           Int?
  assists                          Int?
  doubleKills                      Int?
  tripleKills                      Int?
  quadraKills                      Int?
  pentaKills                       Int?
  totalDamageDealtToChampions      Int?
  totalHeal                        Int?
  totalHealsOnTeammates            Int?
  damageDealtToObjectives          Int?
  damageDealtToTurrets             Int?
  visionScore                      Int?
  timeCCingOthers                  Int?
  totalDamageTaken                 Int?
  goldEarned                       Int?
  wardsPlaced                      Int?
  wardsKilled                      Int?
  champLevel                       Int?
  creepScore                       Int?
  mainRune                         Int?
  secondaryRune                    Int?
  firstBloodKill                   Boolean?
  firstTowerKill                   Boolean?
  firstInhibitorKill               Boolean?
  firstBaronKill                   Boolean?
  firstDragonKill                  Boolean?
  firstRiftHeraldKill              Boolean?
  completeSupportQuestInTime       Boolean?  
  player                           RankedInformation     @relation(fields: [playerId], references: [summonerId])
  match                            Match                 @relation(fields: [matchId], references: [id])

  @@index([playerId])
  @@index([matchId])
  @@unique([matchId,playerId])
}
model Match {
  id                 String        @id @unique
  queueId            Int
  gameVersion        String
  gameMode           String
  mapId              Int
  gameDuration       String
  gameCreation       Float
  players            PlayerMatchStats []
}
model Champions {
  id                            Int        @id
  name                          String     
  gamesPlayed                   Int        
  wins                          Int        
  losses                        Int        
  kills                         Int      
  deaths                        Int      
  assists                       Int        
  killingSprees                 Int      
  doubleKills                   Int      
  tripleKills                   Int      
  quadraKills                   Int      
  pentaKills                    Int      
  totalDamageDealtToChampions   Float      
  totalHeal                     Float      
  totalUnitsHealed              Float      
  damageDealtToObjectives       Float      
  damageDealtToTurrets          Float      
  visionScore                   Int      
  timeCCingOthers               Float      
  totalDamageTaken              Float      
  goldEarned                    Float      
  wardsPlaced                   Int      
  wardsKilled                   Int      
  firstBloodKill                Int      
  firstTowerKill                Int      
  firstInhibitorKill            Int      
  firstBaronKill                Int      
  firstDragonKill               Int      
  firstRiftHeraldKill           Int      
  completeSupportQuestInTime    Int      
  
  @@unique([id,name])
}